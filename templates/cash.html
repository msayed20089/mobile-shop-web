
<div class="row">
  <div class="col-md-4">
    <div class="card mb-4">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">ğŸ’° Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø²Ù†Ø©</h5>
      </div>
      <div class="card-body">
        <form method="POST" class="needs-validation" novalidate>
          <div class="mb-3">
            <label for="amount" class="form-label"><strong>Ø§Ù„Ù…Ø¨Ù„Øº:</strong></label>
            <input type="number" step="0.01" class="form-control" id="amount" name="amount" 
                   placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº" required>
            <div class="invalid-feedback">
              Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº
            </div>
          </div>
          
          <div class="mb-3">
            <label for="note" class="form-label"><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong></label>
            <input type="text" class="form-control" id="note" name="note" 
                   placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø´Ø±Ø§Ø¡ ÙƒØ±ÙˆØª - Ø¯Ø®Ù„ Ù…Ø¨ÙŠØ¹Ø§Øª - Ù…ØµØ±ÙˆÙØ§Øª">
          </div>
          
          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-success">
              ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±ØµÙŠØ¯ -->
    <div class="card">
      <div class="card-body text-center">
        <h6 class="card-title">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</h6>
        <h2 class="text-{{ 'success' if total >= 0 else 'danger' }}">
          {{ "%.2f"|format(total) }} Ø¬Ù†ÙŠÙ‡
        </h2>
        <small class="text-muted">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: {{ transactions[0].date.strftime('%Y-%m-%d %H:%M') if transactions else '--' }}</small>
      </div>
    </div>
  </div>

  <div class="col-md-8">
    <div class="card">
      <div class="card-header bg-info text-white">
        <h5 class="mb-0">ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</h5>
      </div>
      <div class="card-body p-0">
        {% if transactions %}
          <div class="table-responsive" style="max-height: 600px;">
            <table class="table table-striped table-hover mb-0">
              <thead class="table-light sticky-top">
                <tr>
                  <th>Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª</th>
                  <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                  <th>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</th>
                  <th>Ø§Ù„Ù†ÙˆØ¹</th>
                </tr>
              </thead>
              <tbody>
                {% for tx in transactions %}
                  <tr>
                    <td>
                      <small>{{ tx.date.strftime('%Y-%m-%d %H:%M') }}</small>
                    </td>
                    <td>
                      <span class="badge bg-{{ 'success' if tx.amount > 0 else 'danger' }} fs-6">
                        {{ "%.2f"|format(tx.amount) }} Ø¬Ù†ÙŠÙ‡
                      </span>
                    </td>
                    <td>{{ tx.note or '-' }}</td>
                    <td>
                      {% if tx.amount > 0 %}
                        <span class="badge bg-success">Ø¯Ø®Ù„</span>
                      {% else %}
                        <span class="badge bg-danger">Ù…ØµØ±ÙˆÙ</span>
                      {% endif %}
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% else %}
          <div class="text-center text-muted py-5">
            <h5>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ø³Ø¬Ù„Ø©</h5>
            <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ù„Ù„Ø®Ø²Ù†Ø©</p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<div class="mt-4 text-center">
  <a href="{{ url_for('index') }}" class="btn btn-outline-primary">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
</div>

<script>
// ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
(function() {
  'use strict';
  var forms = document.querySelectorAll('.needs-validation');
  Array.prototype.slice.call(forms).forEach(function(form) {
    form.addEventListener('submit', function(event) {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add('was-validated');
    }, false);
  });
})();
</script>
